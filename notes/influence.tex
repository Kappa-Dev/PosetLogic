\subsection{Influence}
\label{sec:infl}

\begin{definition}[Multisum in the subcategory of monos]
  Let $G_1$ and $G_2$ be two graphs. The \emph{multisums} of $G_1$ and $G_2$ is a family of cospans of monos $G_1\lemb M_i\remb G_2$ such that for any other cospan of monos $G_1\lemb M'\remb G_2$ there exists a unique $M_k$, $k\leq n$ and a unique mono $M_k\lemb M'$:
  \[
  \begin{tikzpicture} %[scale=0.8]
    \node (l1) at (-1.5,0) {\(G_1\)};
    \node (l2) at (1.5,0) {\(G_2\)};
    \node (m1) at (-1,1) {\(M_1\)};
    \node (m2) at (0,1) {\(\cdots\)};
    \node (mn) at (1,1) {\(M_n\)};
    \node (n) at (0,2.5) {\(M'\)};
    \draw [->] (l1) -- (m1);
    \draw [->] (l2) -- (m1);
    \draw [->] (l1) -- (mn);
    \draw [->] (l2) -- (mn);
    \draw [->] (l1) to [bend left] (n);
    \draw [->] (l2) to [bend right] (n);
    \draw [->, dotted] (m1) -- (n);
  \end{tikzpicture}
  \]
\end{definition}

\begin{remark}
  In using monos in the definition above, we define a family of cospans instead of defining the sum or disjoint union of $G_1$ and $G_2$.
\end{remark}

\begin{definition}[Pullback]
  The \emph{pullback} of the cospan $G_1\rightarrow M\leftarrow G_2$ is the span $G_1\leftarrow O\rightarrow G_2$ such that the following diagram commutes
  \[
  \begin{tikzpicture} %[scale=0.8]
    \node (o) at (0,-1) {\(O\)};
    \node (l1) at (-1,0) {\(G_1\)};
    \node (l2) at (1,0) {\(G_2\)};
    \node (m) at (0,1) {\(M\)};
    \draw [->] (o) --  (l1);
    \draw [->] (o) --  (l2);
    \draw [->] (l1) --  (m);
    \draw [->] (l2) --  (m);
  \end{tikzpicture}
  \]
  and such that for any other span $G_1\leftarrow O'\rightarrow G_2$ for which the diagram commutes, there is a unique morphism $O'\to O$:
  \[
  \begin{tikzpicture} %[scale=0.8]
    \node (o) at (0,-1) {\(O\)};
    \node (l1) at (-1.5,0) {\(G_1\)};
    \node (l2) at (1.5,0) {\(G_2\)};
    \node (m) at (0,1) {\(M\)};
    \node (n) at (0,-2) {\(O'\)};
    \draw [->] (o) --  (l1);
    \draw [->] (o) --  (l2);
    \draw [->] (l1) --  (m);
    \draw [->] (l2) --  (m);
    \draw [->] (n) to [bend left] (l1);
    \draw [->] (n) to [bend right] (l2);
    \draw [->, dotted] (n) -- (o);
  \end{tikzpicture}
  \]
\end{definition}

\begin{property}
  \begin{itemize}
  \item The pullback is unique up to isomorphism.
  \item The pullback preserves monos: if $G_i\to M$ is a mono then $O\to G_i$ is also a mono.
  \end{itemize}
\end{property}

\begin{definition}[Positive influence~\cite{RussInfluence}]
  \label{def:pos_infl}
  Let $L_1{\remb} D_1 {\lemb} R_1$ and $L_2{\remb} D_2 {\lemb} R_2$ be two rules.
%
  Let the cospan $R_1\lemb M\remb L_2$ be in the multisum of $R_1$ and $L_2$, from which we get the span $R_1\remb O\lemb L_2$ as pullback.
%
  There is a \emph{positive influence} between the two rules induced by the cospan $\spa:R_1\remb O\lemb L_2$ and denoted $r_1\redl{+}_{\spa} r_2$ if the pullback of the cospan $D_1\lemb R_1\remb O$, denoted $P$, and $O$ is not an iso. In other words, $O$ is not contained in $P$.
  \[
  \begin{tikzpicture} %[scale=0.8]
    \node (p) at (0,-1) {\(P\)};
    \node (d1) at (-1,0) {\(D_1\)};
    \node (o) at (1,0) {\(O\)};
    \node (m) at (1,2) {\(M\)};
    \node (r1) at (0,1) {\(R_1\)};
    \node (l1) at (-2,1) {\(L_1\)};
    \node (l2) at (2,1) {\(L_2\)};
    \draw [->] (p) -- (d1);
    \draw [->] (p) -- node [right,midway] {$\not\iso$}  (o);
    \draw [->] (d1) -- (r1);
    \draw [->] (d1) -- (l1);
    \draw [->] (o) -- (r1);
    \draw [->] (o) -- (l2);
    \draw [->] (r1) --  (m);
    \draw [->] (l2) --  (m);
  \end{tikzpicture}
  \]
  Define $r_1\redl{+} r_2$ if there exists $\spa$ such that $r_1\redl{+}_{\spa} r_2$.
\end{definition}

Similarly, define the negative influence $r_1\redl{-}_{\spa} r_2$ if there exists the span $\spa:L_1{\remb} O {\lemb} L_2$ and there is no iso between the pullback of the cospan $D_1\lemb L_1\remb O$ and $O$.

\begin{property}
  Let the cospan $G_1\lemb M\remb G_2$ be in the multisum of $G_1$ and $G_2$, and let the span $G_1\remb O\lemb G_2$ be its pullback. Then $G_1\lemb M\remb G_2$ is the pushout of $G_1\remb O\lemb G_2$.
\end{property}
\begin{proof}
 Suffices to show that there exists no cospan $G_1\lemb M_k\remb G_2$ be in the multisum of $G_1$ and $G_2$, such that $G_1\remb O\lemb G_2$ is its pullback.
\end{proof}

The property allows one to derive the influence between two rules using the multisum, but then to forget the multisum and only keep the spans $\spa$ in the influence $r_1\redl{+}_{\spa} r_2$.

We say that a span $\spa:G\remb O\lemb H$ is empty if $O\iso\varepsilon$. For two spans $\spa_1 = G\remb O_1\lemb H$ and $\spa_2 = G\remb O_1\lemb H$ we write $\spa_1\subseteq \spa_2$ whenever there exists an mono $O_1\emb O_2$ that commutes.
